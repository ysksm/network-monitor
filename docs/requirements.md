# Network Monitor - 要求仕様書

## 1. 概要

ローカルネットワーク上のホストを自動検出し、各ホストの稼働状況・応答時間を継続的にモニタリングするWebアプリケーション。

## 2. 機能要件

### 2.1 ネットワークスキャン

- 指定したサブネット (例: `192.168.1.0/24`) を対象にホスト検出を行う
- ICMP ping によるホストの生存確認
- TCP ポートスキャンによるオープンポートの検出
- スキャン対象のサブネットをUI上から設定可能
- 手動スキャン実行および定期スキャン (間隔設定可能) に対応

### 2.2 継続モニタリング

- 検出済みホストに対して定期的にpingを実行し、応答時間を記録
- モニタリング間隔を設定可能 (デフォルト: 30秒)
- ホストのオンライン/オフライン状態の遷移を検知
- 状態変化時のイベント記録 (タイムスタンプ付き)

### 2.3 ダッシュボード (フロントエンド)

- ホスト一覧テーブル
  - IPアドレス
  - ホスト名 (逆引きDNSまたはユーザー設定)
  - ステータス (Online / Offline)
  - 最新の応答時間 (ms)
  - オープンポート一覧
  - 最終確認日時
- 応答時間の時系列グラフ (ホスト単位)
- ネットワーク全体のサマリー (オンラインホスト数 / 総検出数)
- リアルタイム更新 (WebSocket)

### 2.4 アラート・通知

- ホストがオフラインになった場合にUI上で通知
- 応答時間が閾値を超えた場合に警告表示
- イベントログの表示

### 2.5 設定

- スキャン対象サブネットの追加・削除
- モニタリング間隔の変更
- ポートスキャン対象ポートの指定 (well-knownポート / カスタム)
- 応答時間の警告閾値

## 3. 非機能要件

### 3.1 パフォーマンス

- /24 サブネット (254ホスト) のスキャンを60秒以内に完了
- モニタリング中のサーバーCPU使用率を低く維持
- フロントエンドは1秒以内にレスポンスを描画

### 3.2 セキュリティ

- ローカルネットワーク内での使用を前提とする
- サーバーはlocalhost またはプライベートIPのみでリッスン
- ポートスキャンは自身が管理するネットワークに対してのみ実行すること (利用者の責任)

### 3.3 対応環境

- サーバー: macOS / Linux
- ブラウザ: Chrome, Firefox, Safari (最新版)

## 4. ユースケース

### UC-1: 初回スキャン

1. ユーザーがサブネット (例: `192.168.1.0/24`) を入力
2. 「スキャン開始」ボタンを押下
3. バックエンドがサブネット内の全IPに対してping + ポートスキャンを実行
4. 検出されたホストがダッシュボードに表示される

### UC-2: 継続モニタリング

1. スキャン完了後、ユーザーが「モニタリング開始」を押下
2. 設定された間隔で全検出ホストへpingを実行
3. ダッシュボードがリアルタイムに更新される
4. ホストのオフライン遷移時に通知が表示される

### UC-3: 応答時間の確認

1. ユーザーがホスト一覧から特定のホストを選択
2. 応答時間の時系列グラフが表示される
3. 過去の応答時間推移を確認可能
